@model H4G_Project.Models.ShippingRate
@{
    ViewBag.Title = "Create Shipping Rate";
    Layout = "~/Views/Shared/_AdminManager.cshtml";
}
<html>
<head>
    <!-- Use Unicode character encoding - multi-language compatibility -->
    <meta charset="utf-8">
    <!-- Set the initial view zooming scale for mobile device -->
    <meta name="viewport" content="width = device-width,
 initial-scale = 1" />
    <title>NP Courier Service</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- Reference to customized styling for this website -->
    <link rel="stylesheet" type="text/css" href="~/css/CreateParcelRecord.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .card-container {
            max-width: 500px;
            margin: 0 auto;
            margin-top: 50px;
            padding: 20px;
            border-radius: 10px;
            background-color: #f9f9f9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .form-label {
            font-weight: bold;
            color: #555;
        }

        .btn-create {
            background-color: #007bff;
            border-color: #007bff;
        }
    </style>
</head>
<body>
    <div class="card-container">
        <h4 class="text-center mb-4">Shipping Rate</h4>
        <hr />

        <form asp-action="ShippingRateCreate">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            
            <div class="form-group">
                <label asp-for="fromCity" class="form-label"></label>
                <select id="fromCity" asp-for="fromCity" class="form-control" required>
                    <option value="Singapore">Singapore</option>
                </select>
                <span asp-validation-for="fromCity" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="fromCountry" class="form-label"></label>
                <select id="fromCountry" asp-for="fromCountry" asp-items="@ViewData["countries"] as List<SelectListItem>"
                        class="form-control" required>
                    <option value="Singapore" hidden></option>
                </select>
                <span asp-validation-for="fromCountry" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="toCity" class="form-label"></label>
                <select id="toCity" asp-for="toCity" class="form-control" required>
                    <option value="Singapore">Singapore</option>
                </select>
                <span asp-validation-for="toCity" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="toCountry" class="form-label"></label>
                <select id="toCountry" asp-for="toCountry" asp-items="@ViewData["countries"] as List<SelectListItem>"
                        class="form-control" required>
                    <option value="Singapore" hidden></option>
                </select>
                <span asp-validation-for="toCountry" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="shippingRate" class="form-label"></label>
                <input asp-for="shippingRate" class="form-control" />
                <span asp-validation-for="shippingRate" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="currency" class="form-label"></label>
                <input asp-for="currency" class="form-control" />
                <span asp-validation-for="currency" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="transitTime" class="form-label"></label>
                <input asp-for="transitTime" class="form-control" />
                <span asp-validation-for="transitTime" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="lastUpdatedBy" class="form-label"></label>
                <input asp-for="lastUpdatedBy" class="form-control" />
                <span asp-validation-for="lastUpdatedBy" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary btn-create btn-block" />
            </div>
        </form>
    </div>

    <div class="mt-3 text-center">
        <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    </div>
</body>
@section scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Load cities dynamically based on the selected country
        $(function () {
           
            $('#toCountry').change(function () {
                var selectedCountry = $(this).val();
                $.ajax({
                    url: '@Url.Action("GetCities", "AdminManager")',
                    type: 'GET',
                    data: { country: selectedCountry },
                    success: function (response) {
                        $('#toCity').empty();
                        $.each(response, function (i, city) {
                            $('#toCity').append($('<option></option>').val(city).html(city));
                        });
                    },
                    error: function (xhr, status, error) {
                        console.log(xhr.responseText);
                    }
                });
            });
        });
        $(function () {

            $('#fromCountry').change(function () {
                var selectedCountry = $(this).val();
                $.ajax({
                    url: '@Url.Action("GetCities", "AdminManager")',
                    type: 'GET',
                    data: { country: selectedCountry },
                    success: function (response) {
                        $('#fromCity').empty();
                        $.each(response, function (i, city) {
                            $('#fromCity').append($('<option></option>').val(city).html(city));
                        });
                    },
                    error: function (xhr, status, error) {
                        console.log(xhr.responseText);
                    }
                });
            });
        });
    </script>  
    }
    
